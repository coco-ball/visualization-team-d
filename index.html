<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>비라제 D조 - 반지하 지도</title>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
  <link
    href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=Poppins:wght@100;200;300;500;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    span {
      font-family: "Nanum Gothic", sans-serif;
      font-family: "Poppins", sans-serif;
    }
    body {
      margin: 0;
      padding: 0;
    }
    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }

    .legend {
      background-color: white;
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 2px;
      border-radius: 2px;
    }

    .legend-key {
      display: inline-block;
      border-radius: 20%;
      width: 10px;
      height: 10px;
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    mapboxgl.accessToken =
      "pk.eyJ1IjoiY29jby1iYWxsIiwiYSI6ImNsZ3V6MGdiYzJiYXczcXA5dXNib3FiNmgifQ.iIc1Mn4BuftkfQLkeUdVUw";
    const map = new mapboxgl.Map({
      container: "map", // container ID
      style: "mapbox://styles/mapbox/light-v11", // style URL
      center: [126.93877, 37.5018],
      zoom: 14.5,
      pitch: 60,
      bearing: 10,
    });
    map.addControl(new mapboxgl.NavigationControl());
    map.on("load", function () {
      map.addSource("dongjak-bvod11", {
        type: "vector",
        url: "mapbox://coco-ball.1x2lg3z8",
      });
      map.addSource("seoul-4f83ed", {
        type: "vector",
        url: "mapbox://coco-ball.98kzo2nk",
      });
      map.addLayer({
        id: "dongjak",
        type: "fill-extrusion",
        source: "dongjak-bvod11",
        "source-layer": "dongjakgeojsonl",
        paint: {
          "fill-extrusion-color": "#d9cece",
          "fill-extrusion-height": 0,
          "fill-extrusion-base": 10,
          "fill-extrusion-opacity": 0.4,
        },
      });
      map.addLayer({
        id: "dongjak_waterfill",
        type: "fill-extrusion",
        source: "dongjak-bvod11",
        "source-layer": "dongjakgeojsonl",
        paint: {
          "fill-extrusion-color": "#2dd4e6",
          "fill-extrusion-height": [
            "interpolate",
            ["linear"],
            ["zoom"],
            16,
            0,
            17.5,
            10,
          ],
          "fill-extrusion-base": 0,
          "fill-extrusion-opacity": [
            "interpolate",
            ["linear"],
            ["zoom"],
            14.5,
            0,
            16,
            0.6,
          ],
        },
      });
      map.addLayer({
        id: "seoul",
        type: "fill-extrusion",
        source: "seoul-4f83ed",
        "source-layer": "seoul-4f83ed",
        paint: {
          "fill-extrusion-color": "#99f5ff",
          "fill-extrusion-height": [
            "interpolate",
            ["linear"],
            ["zoom"],
            16,
            0,
            17.5,
            10,
          ],
          "fill-extrusion-base": 0,
          "fill-extrusion-opacity": [
            "interpolate",
            ["linear"],
            ["zoom"],
            14.5,
            0,
            16,
            0.6,
          ],
        },
      });
      map.addLayer({
        id: "sky",
        type: "sky",
        paint: { "sky-atmosphere-color": "#eda6de" },
      });
    });
  </script>
  <div class="legend" id="legend">
    <div>
      <span class="legend-key" style="background-color: #800000"></span>
      <span>1950</span>
    </div>
    <div>
      <span class="legend-key" style="background-color: #cc0000"></span>
      <span>1960</span>
    </div>
    <label for="침수흔적도">
      <input id="침수흔적도" , type="checkbox" name="침수흔적도" checked />
      <span>침수흔적도</span>
    </label>
    <label for="침수예상도">
      <input id="침수예상도" , type="checkbox" name="침수흔적도" checked />
      <span>침수예상도</span>
    </label>
  </div>
</body>
